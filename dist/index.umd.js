var f=Object.defineProperty;var d=(n,r,a)=>r in n?f(n,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[r]=a;var s=(n,r,a)=>(d(n,typeof r!="symbol"?r+"":r,a),a);(function(n,r){typeof exports=="object"&&typeof module!="undefined"?r(exports):typeof define=="function"&&define.amd?define(["exports"],r):(n=typeof globalThis!="undefined"?globalThis:n||self,r((n.socket=n.socket||{},n.socket["io-mock-ts"]={})))})(this,function(n){"use strict";var r={exports:{}};(function(h){h.exports=t;function t(e){if(e)return i(e)}function i(e){for(var c in t.prototype)e[c]=t.prototype[c];return e}t.prototype.on=t.prototype.addEventListener=function(e,c){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(c),this},t.prototype.once=function(e,c){function o(){this.off(e,o),c.apply(this,arguments)}return o.fn=c,this.on(e,o),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,c){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var o=this._callbacks["$"+e];if(!o)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var l,u=0;u<o.length;u++)if(l=o[u],l===c||l.fn===c){o.splice(u,1);break}return o.length===0&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var c=new Array(arguments.length-1),o=this._callbacks["$"+e],l=1;l<arguments.length;l++)c[l-1]=arguments[l];if(o){o=o.slice(0);for(var l=0,u=o.length;l<u;++l)o[l].apply(this,c)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}})(r);var a=r.exports;class m extends a{constructor(t){super();s(this,"connected");s(this,"disconnected");s(this,"serverMock");s(this,"_emitFn");s(this,"emit",(t,...i)=>{let e;return typeof i[i.length-1]=="function"&&(e=i.pop()),this.serverMock.emitEvent(t,i,e)});s(this,"fireEvent",(t,...i)=>this._emitFn(t,...i));s(this,"close",()=>(this.disconnected=!0,this.connected=!1,this.emit("disconnect","io client disconnect"),this));s(this,"disconnect",()=>this.close());this.serverMock=t,this._emitFn=a.prototype.emit,this.connected=!1,this.disconnected=!0}}const p=h=>h?JSON.parse(JSON.stringify(h)):void 0;class k extends a{constructor(t){super();s(this,"clientMock");s(this,"handshake");s(this,"rooms");s(this,"_emitFn");s(this,"generalCallbacks");s(this,"broadcast");s(this,"emitEvent",(t,i,e)=>this._emitFn(t,...i.map(p),e));s(this,"onEmit",(t,i)=>{this.generalCallbacks[t]=i});s(this,"emit",(t,...i)=>this.clientMock.fireEvent(t,...i));s(this,"join",t=>{this.rooms.push(t)});s(this,"leave",t=>{const i=this.rooms.indexOf(t);this.rooms.splice(i,1)});s(this,"monitor",t=>t);s(this,"disconnect",()=>(this.emit("disconnecting","Socket.IO mock server disconnect"),this.emit("disconnect","Socket.IO mock server disconnect"),this._emitFn("disconnecting","Socket.IO mock server disconnect"),this._emitFn("disconnect","Socket.IO mock server disconnect"),this));s(this,"to",t=>({emit:(i,...e)=>{this.generalCallbacks[i]&&this.generalCallbacks[i](...e.map(p),t)}}));this.handshake=t!=null?t:{},this.clientMock=new m(this),this.rooms=[],this._emitFn=a.prototype.emit,this.generalCallbacks={},this.broadcast={to:i=>({emit:(e,...c)=>{this.generalCallbacks[e]&&this.generalCallbacks[e](...c.map(p),i)}})},this.clientMock.connected=!0,this.clientMock.disconnected=!1,this.emit("connect")}}n.SocketClientMock=m,n.SocketServerMock=k,n.default=k,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=index.umd.js.map
