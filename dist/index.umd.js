var f=Object.defineProperty;var d=(i,o,a)=>o in i?f(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var n=(i,o,a)=>(d(i,typeof o!="symbol"?o+"":o,a),a);(function(i,o){typeof exports=="object"&&typeof module!="undefined"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(i=typeof globalThis!="undefined"?globalThis:i||self,o((i.socket=i.socket||{},i.socket["io-mock-ts"]={})))})(this,function(i){"use strict";var o={exports:{}};(function(h){h.exports=t;function t(e){if(e)return s(e)}function s(e){for(var r in t.prototype)e[r]=t.prototype[r];return e}t.prototype.on=t.prototype.addEventListener=function(e,r){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(r),this},t.prototype.once=function(e,r){function c(){this.off(e,c),r.apply(this,arguments)}return c.fn=r,this.on(e,c),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var c=this._callbacks["$"+e];if(!c)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var l,u=0;u<c.length;u++)if(l=c[u],l===r||l.fn===r){c.splice(u,1);break}return c.length===0&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var r=new Array(arguments.length-1),c=this._callbacks["$"+e],l=1;l<arguments.length;l++)r[l-1]=arguments[l];if(c){c=c.slice(0);for(var l=0,u=c.length;l<u;++l)c[l].apply(this,r)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}})(o);var a=o.exports;class p extends a{constructor(t){super();n(this,"connected");n(this,"disconnected");n(this,"serverMock");n(this,"_emitFn");n(this,"emit",(t,...s)=>{let e;return typeof s[s.length-1]=="function"&&(e=s.pop()),this.serverMock.emitEvent(t,s,e)});n(this,"fireEvent",(t,...s)=>this._emitFn(t,...s));n(this,"close",()=>(this.disconnected=!0,this.connected=!1,this.emit("disconnect","io client disconnect"),this));n(this,"disconnect",()=>this.close());this.serverMock=t,this._emitFn=a.prototype.emit,this.connected=!1,this.disconnected=!0}}const k=h=>h?JSON.parse(JSON.stringify(h)):void 0;class m extends a{constructor(){super();n(this,"clientMock");n(this,"rooms");n(this,"_emitFn");n(this,"generalCallbacks");n(this,"broadcast");n(this,"emitEvent",(t,s,e)=>this._emitFn(t,...s.map(k),e));n(this,"onEmit",(t,s)=>{this.generalCallbacks[t]=s});n(this,"emit",(t,...s)=>this.clientMock.fireEvent(t,...s));n(this,"join",t=>{this.rooms.push(t)});n(this,"leave",t=>{const s=this.rooms.indexOf(t);this.rooms.splice(s,1)});n(this,"monitor",t=>t);n(this,"disconnect",()=>(this.emit("disconnecting","Socket.IO mock server disconnect"),this.emit("disconnect","Socket.IO mock server disconnect"),this._emitFn("disconnecting","Socket.IO mock server disconnect"),this._emitFn("disconnect","Socket.IO mock server disconnect"),this));n(this,"to",t=>({emit:(s,...e)=>{this.generalCallbacks[s]&&this.generalCallbacks[s](...e.map(k),t)}}));this.clientMock=new p(this),this.rooms=[],this._emitFn=a.prototype.emit,this.generalCallbacks={},this.broadcast={to:t=>({emit:(s,...e)=>{this.generalCallbacks[s]&&this.generalCallbacks[s](...e.map(k),t)}})},this.clientMock.connected=!0,this.clientMock.disconnected=!1,this.emit("connect")}}i.SocketClientMock=p,i.SocketServerMock=m,i.default=m,Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=index.umd.js.map
