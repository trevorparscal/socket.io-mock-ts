var f=Object.defineProperty;var d=(n,r,a)=>r in n?f(n,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[r]=a;var i=(n,r,a)=>(d(n,typeof r!="symbol"?r+"":r,a),a);(function(n,r){typeof exports=="object"&&typeof module!="undefined"?r(exports):typeof define=="function"&&define.amd?define(["exports"],r):(n=typeof globalThis!="undefined"?globalThis:n||self,r((n.socket=n.socket||{},n.socket["io-mock-ts"]={})))})(this,function(n){"use strict";var r={exports:{}};(function(h){h.exports=t;function t(e){if(e)return s(e)}function s(e){for(var c in t.prototype)e[c]=t.prototype[c];return e}t.prototype.on=t.prototype.addEventListener=function(e,c){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(c),this},t.prototype.once=function(e,c){function o(){this.off(e,o),c.apply(this,arguments)}return o.fn=c,this.on(e,o),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,c){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var o=this._callbacks["$"+e];if(!o)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var l,u=0;u<o.length;u++)if(l=o[u],l===c||l.fn===c){o.splice(u,1);break}return o.length===0&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var c=new Array(arguments.length-1),o=this._callbacks["$"+e],l=1;l<arguments.length;l++)c[l-1]=arguments[l];if(o){o=o.slice(0);for(var l=0,u=o.length;l<u;++l)o[l].apply(this,c)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}})(r);var a=r.exports;class p extends a{constructor(t){super();i(this,"connected");i(this,"disconnected");i(this,"serverMock");i(this,"_emitFn");i(this,"emit",(t,...s)=>{let e;return typeof s[s.length-1]=="function"&&(e=s.pop()),this.serverMock.emitEvent(t,s,e)});i(this,"fireEvent",(t,...s)=>this._emitFn(t,...s));i(this,"close",()=>(this.disconnected=!0,this.connected=!1,this.emit("disconnect","io client disconnect"),this._emitFn("disconnect","io client disconnect"),this));i(this,"disconnect",()=>this.close());this.serverMock=t,this._emitFn=a.prototype.emit,this.connected=!1,this.disconnected=!0}}const m=h=>h?JSON.parse(JSON.stringify(h)):void 0;class k extends a{constructor(t){super();i(this,"clientMock");i(this,"handshake");i(this,"rooms");i(this,"_emitFn");i(this,"generalCallbacks");i(this,"broadcast");i(this,"emitEvent",(t,s,e)=>this._emitFn(t,...s.map(m),e));i(this,"onEmit",(t,s)=>{this.generalCallbacks[t]=s});i(this,"emit",(t,...s)=>this.clientMock.fireEvent(t,...s));i(this,"join",t=>{this.rooms.push(t)});i(this,"leave",t=>{const s=this.rooms.indexOf(t);this.rooms.splice(s,1)});i(this,"monitor",t=>t);i(this,"disconnect",()=>(this.emit("disconnecting","Socket.IO mock server disconnect"),this.emit("disconnect","Socket.IO mock server disconnect"),this._emitFn("disconnecting","Socket.IO mock server disconnect"),this._emitFn("disconnect","Socket.IO mock server disconnect"),this));i(this,"to",t=>({emit:(s,...e)=>{this.generalCallbacks[s]&&this.generalCallbacks[s](...e.map(m),t)}}));this.handshake=t!=null?t:{},this.clientMock=new p(this),this.rooms=[],this._emitFn=a.prototype.emit,this.generalCallbacks={},this.broadcast={to:s=>({emit:(e,...c)=>{this.generalCallbacks[e]&&this.generalCallbacks[e](...c.map(m),s)}})},this.clientMock.connected=!0,this.clientMock.disconnected=!1,this.emit("connect")}}n.SocketClientMock=p,n.SocketServerMock=k,n.default=k,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=index.umd.js.map
